function s3(t,e){this.url=t,this.productName=e,this.prefix=this.productName}function getVersions(t,e,i){i($.map(t,function(t){return t.key.substring(e.length+1,t.key.length-1)}))}function cmp(t,e){for(var i=t.split("."),n=e.split("."),r=0;3>r;r++){var s=Number(i[r]),o=Number(n[r]);if(s>o)return-1;if(o>s)return 1;if(!isNaN(s)&&isNaN(o))return-1;if(isNaN(s)&&!isNaN(o))return 1}return 0}function bytesToHumanReadable(t){var e=-1,i=[" kB"," MB"," GB"];do t/=1024,e++;while(t>1024);return Math.max(t,.1).toFixed(1)+i[e]}var images=["static/images/step1.png","static/images/step2.png","static/images/step3.png","static/images/complete.png"],obj={curImg:0},tween=TweenMax.to(obj,.5,{curImg:images.length-1,roundProps:"curImg",repeat:0,immediateRender:!0,ease:Linear.easeNone,onUpdate:function(){$("#screen-shot").attr("src",images[obj.curImg])}}),controller=new ScrollMagic.Controller,controller2=new ScrollMagic.Controller,scene=new ScrollMagic.Scene({triggerElement:"#screen-shot",duration:400}).setTween(tween).addTo(controller),scene2=new ScrollMagic.Scene({triggerElement:"#trigger",duration:100}).addTo(controller).on("enter",function(){$("#screen-shot").css("bottom",0)}),BrowserDetect={init:function(){this.OS=this.searchString(this.dataOS)||"an unknown OS",this.bit=this.searchString(this.dataBit)||"",this.OsVersion=this.searchString(this.dataOsVersion)||"an unknown OS version"},searchString:function(t){for(var e=0;e<t.length;e++){var i=t[e].string,n=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(n)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],dataBit:[{string:navigator.userAgent,subString:"Win64",identity:"x64"},{string:navigator.userAgent,subString:"WOW64",identity:"x64"}],dataOsVersion:[{string:navigator.userAgent,subString:"NT 5.1",identity:"XP"},{string:navigator.userAgent,subString:"NT 6.0",identity:"Vista"},{string:navigator.userAgent,subString:"NT 6.1",identity:"7"},{string:navigator.userAgent,subString:"NT 6.2",identity:"8"}]};s3.prototype.getLatestVersion=function(t){getData(this,function(e){getVersions(e.directories,"etcher",function(e){t(e.sort(cmp)[0])})})},s3.prototype.getFiles=function(t,e){this.prefix=this.prefix+"/"+t,getData(this,function(t){e(t.files)})},s3.prototype.getDynamicLink=function(t,e,i,n){switch(e){case"macos":buttonText="Download for OSX",n(findLink(t,this.productName+".dmg",buttonText));break;case"windows":buttonText="Download for Windows",n(findLink(t,this.productName+".exe",buttonText));break;case"linux":buttonText="Download for Linux",n(findLink(t,this.productName+"-linux",buttonText));break;default:n()}};var findLink=function(t,e,i){for(var n=[],r=0,s=t.length;s>r;r++)if(-1!=t[r].link.toLowerCase().indexOf(e)&&(t[r].buttonText=i,n.push(t[r])),r===s-1)return n};getData=function(t,e){query_url=t.url+"?delimiter=/&prefix="+t.prefix+"/",$.get(query_url).done(function(i){var n=$(i);e(parseXML(n,t))}).fail(function(t){console.error(t)})},parseXML=function(t,e){var i=$.map(t.find("Contents"),function(t){return t=$(t),{name:t.find("Key").text().substring(e.productName.length+7),link:e.url+"/"+t.find("Key").text(),lastModified:t.find("LastModified").text(),size:bytesToHumanReadable(t.find("Size").text()),type:"file"}}),n=$.map(t.find("CommonPrefixes"),function(t){return t=$(t),{key:t.find("Prefix").text(),lastModified:"",size:"0",type:"directory"}});return{files:i,directories:n,prefix:$(t.find("Prefix")[0]).text()}};